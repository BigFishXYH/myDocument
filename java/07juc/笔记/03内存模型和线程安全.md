# 内存模型和线程安全

## 原子性

- 一个操作不可中断的，即使是在多线程一起执行的时候，一个操作一旦开始，就不会被其它线程干扰



## 有序性

- 程序执行的顺序与书写的顺序未必一样，会进行指令重排序



## 可见性

- 当一个线程修改了某一个共享变量的值，其它线程是否能够立即知道这个修改
  - 编译器优化
  - 硬件优化

## Happen-Before规则

- 程序顺序原则：一个县城内保证语义的串行性
-  volatile规则：voatile变量的写，先发生于读，这保证了volatile变量的可见性
- 锁规则：解锁（unlock）必然发生在随后的加锁（lock）前
- 传递性：A先于B,B先于C，那么A必然先于C
- 线程的start()方法优先于它的每一个动作
- 线程的所有操作先于线程的终结（Thread.join）
- 线程的中断（interrupt()）先于被中断线程的代码
- 对象的构造函数执行结束先于finalize()方法



## 线程安全概念

- 在多线程环境中，能正确处理各个线程的变量，使程序功能正确完成