# 遇到问题

[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]

[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]

[3]: max number of threads [2048] for user [elk] is too low, increase to at least [4096] 

1. vim /etc/security/limits.conf 在末尾追加以下内容（elk为启动用户，当然也可以指定为*）

   ```shell
   elk soft nofile 65536 
   elk hard nofile 65536 
   ```

2. 切换到root用户 

   执行命令： sysctl -w vm.max_map_count=262144 

   查看结果： sysctl -a|grep vm.max_map_count 

   显示： vm.max_map_count = 262144   

   上述方法修改之后，如果重启虚拟机将失效 

   解决办法： 在`/etc/sysctl.conf`文件最后添加一行 

   `vm.max_map_count=262144`即可永久修改 

3. 查看用户最大线程数 ulimit -a 

   修改用户最大线程数 ulimit -u 4096 

   ```shell
   vim /etc/security/limits.conf 
   elk soft nproc 4096
   elk hard nproc 4096
   ```


